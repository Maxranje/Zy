(function(t){function e(e){for(var s,r,o=e[0],c=e[1],u=e[2],d=0,h=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&h.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(h.length)h.shift()();return n.push.apply(n,u||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={detail:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/napi/public/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;n.push([4,"chunk-vendors","chunk-common"]),a()})({"044f":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),i=(a("b132"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"padding-bottom":"100px",background:"#ffffff"}},[s("HeaderTop",{attrs:{userinfo:t.basedata.userinfo,current:2}}),s("div",{staticClass:"secNav"},[s("ul",{staticClass:"secNavCont"},t._l(t.basedata.coursetype,(function(e,a){return s("li",{key:a,class:e.active?"on":""},[t._v(t._s(e.name))])})),0)]),s("div",{staticClass:"campus-content"},[s("div",{staticClass:"campusCont"},[s("div",{staticClass:"top"},[s("p",[t._v(t._s(t.basedata.details.coursename))]),s("span",[t._v("班号 #s777777")])]),s("div",{staticClass:"content"},[s("h6",[t._v("简介")]),s("div",{domProps:{innerHTML:t._s(t.basedata.details.coursedetails)}})]),s("TeacherCont",{directives:[{name:"show",rawName:"v-show",value:t.basedata.details.teachers.length>0,expression:"basedata.details.teachers.length>0"}],attrs:{teadata:t.basedata.details.teachers}})],1)]),s("div",{staticClass:"fix_bar"},[s("div",[s("dl",[s("dd",[s("p",{staticClass:"buyBtn",on:{click:t.buycourse}},[t._v("\n            立即报名\n            "),s("img",{attrs:{src:a("6dfa"),alt:""}})])]),s("dt",[t._v(t._s(t.basedata.details.coursename))])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowDialog,expression:"isShowDialog"}],staticClass:"shadow",on:{click:function(e){return e.target!==e.currentTarget?null:t.hideShadow(e)}}},[s("div",{staticClass:"payment"},[s("div",{staticClass:"pay-weixin"},[s("div",{staticClass:"p-w-hd"},[t._v("微信支付")]),s("div",{staticClass:"p-w-bd",staticStyle:{position:"relative"}},[s("div",{staticClass:"j_weixinInfo",staticStyle:{position:"absolute",top:"-36px",left:"130px"}},[t._v("\n            距离二维码过期还剩\n            "),s("span",{staticClass:"j_qrCodeCountdown font-bold font-red"},[t._v(t._s(t.timenum))]),t._v("秒，过期后请重新发起支付\n          ")]),s("div",{staticClass:"p-w-box"},[s("div",{staticClass:"pw-box-hd"},[s("img",{attrs:{id:"weixinImageUrl",src:t.qrurlshow,width:"298",height:"298"}})]),t._m(0),s("div",{staticClass:"pw-error j_weixiError"}),t._m(1)]),s("div",{staticClass:"p-w-sidebar"})])])])]),s("Footer"),s("div",{ref:"tipCont",staticClass:"common-tip-shadow",staticStyle:{display:"none"}})],1)}),n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pw-retry j_weixiRetry",staticStyle:{display:"none"}},[a("a",{staticClass:"ui-button ui-button-gray j_weixiRetryButton",attrs:{href:"javascript:getWeixinImage2();"}},[t._v("获取失败 点击重新获取二维码")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pw-box-ft"},[a("p",[t._v("请使用微信扫一扫")]),a("p",[t._v("扫描二维码支付")])])}],r=a("3c63"),o=a("076e"),c=a("b775"),u=a("3de1"),l=a("d2cf");a("d090"),a("455b"),a("5720");window.location.href.indexOf("test-");var d={name:"campus",data:function(){return{basedata:{details:{}},courseid:Object(u["a"])("courseid"),qrcode:"",isShowDialog:!1,timer:"",timenum:60,token:"",qrurl:"",tracecode:"",timer1:"",qrurlshow:"",num:0,buyFlag:!1}},components:{HeaderTop:r["a"],TeacherCont:l["a"],Footer:o["a"]},computed:{clsName:function(){return{"save-can-click":!0}}},watch:{},mounted:function(){document.title="课程详情",console.log(this.basedata),this.init()},destroyed:function(){},methods:{hideShadow:function(){this.isShowDialog=!1,this.timenum=60,this.num=0},buycourse:function(){var t=this;if(this.buyFlag)return!1;this.buyFlag=!0,this.$request({url:"buycourse",data:{courseid:this.courseid,paytype:"wx"}}).then((function(e){t.buyFlag=!1,0==e.ec?(t.qrurl=e.data.qrurl,t.token=e.data.token,t.tracecode=e.data.tracecode,t.qrurlshow="/napi/account/pay/makeimg?qrurl="+t.qrurl+"&token="+t.token+"&tracecode="+t.tracecode,t.isShowDialog=!0,t.setTimer()):t.showMessage(e.em)}))},getImg:function(){var t=this;this.$request({url:"makeimg",data:{token:this.token,tracecode:this.tracecode,qrurl:this.qrurl},method:"POST",isJson:!1}).then((function(e){console.log(e),t.qrurlshow=e,t.isShowDialog=!0,t.setTimer()}))},initteacher:function(){for(var t=[],e=0;e<this.basedata.details.teachers.length;e+=4)t.push(this.basedata.details.teachers.slice(e,e+4));this.basedata.details.teachers=t},setTimer:function(){var t=this;this.timer=setInterval((function(){t.timenum-=1,t.timenum<=0&&clearInterval(t.timer)}),1e3),this.timer1=setInterval((function(){t.checkstatus()}),1e3)},checkstatus:function(){var t=this;if(this.num+=1,this.num>=60)return clearInterval(this.timer1),this.showMessage("支付失败"),this.hideShadow(),!1;this.$request({url:"checkorder",data:{token:this.token,tracecode:this.tracecode,qrurl:this.qrurl}}).then((function(e){0==e.ec&&1==e.data.status&&(t.showMessage(e.em),t.isShowDialog=!1,clearInterval(t.timer1))}))},showMessage:function(t){var e=this;this.$refs.tipCont.innerHTML=t,this.$refs.tipCont.style.display="block",setTimeout((function(){e.$refs.tipCont.style.display="none"}),2e3)},init:function(){var t=this;this.$request({url:"getCourseDetails",data:{courseid:this.courseid}}).then((function(e){0==e.ec&&(t.basedata=e.data,t.initteacher())}))}}},h=d,f=(a("ccda"),a("2877")),p=Object(f["a"])(h,i,n,!1,null,null,null),v=p.exports,m=(a("41d0"),a("f6bf"));s["a"].use({install:function(t){t.prototype.$request=c["a"]}}),s["a"].component("pagination",m["a"]),s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(v)}}).$mount("#app")},4:function(t,e,a){t.exports=a("044f")},"8b2f":function(t,e,a){},ccda:function(t,e,a){"use strict";var s=a("8b2f"),i=a.n(s);i.a}});